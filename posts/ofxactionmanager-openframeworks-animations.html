<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>zmc.space | openFrameworks: Making Easy Animations With ofxActionManager</title>
  <meta name="description" content="A port of cocos2dx action system">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="openFrameworks: Making Easy Animations With ofxActionManager">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://zmc.space/posts/ofxactionmanager-openframeworks-animations">
  <meta property="og:description" content="A port of cocos2dx action system">
  <meta property="og:site_name" content="zmc.space">
  <meta property="og:image" content="http://zmc.space/assets/og-image.jpg">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="http://zmc.space/posts/ofxactionmanager-openframeworks-animations">
  <meta name="twitter:title" content="openFrameworks: Making Easy Animations With ofxActionManager">
  <meta name="twitter:description" content="A port of cocos2dx action system">
  <meta name="twitter:image" content="http://zmc.space/assets/og-image.jpg">

  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
  <link href="http://zmc.space/feed.xml" type="application/rss+xml" rel="alternate" title="zmc.space Last 10 blog posts" />

  

  
    <link rel="stylesheet" href="/assets/light.css">

  
</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav appear">
  <a href="/" class="header-logo" title="zmc.space">zmc.space</a>
  <ul class="header-links">
    
    
      <li>
        <a href="https://twitter.com/Furkanzmc" rel="noreferrer noopener" target="_blank" title="Twitter">
          <span class="icon icon-twitter"></span>
        </a>
      </li>
    
    
    
      <li>
        <a href="https://github.com/Furkanzmc" rel="noreferrer noopener" target="_blank" title="GitHub">
          <span class="icon icon-github"></span>
        </a>
      </li>
    
    
    
    
    
    
    
  </ul>
</nav>

        <article class="article appear">
          <header class="article-header">
            <h1>openFrameworks: Making Easy Animations With ofxActionManager</h1>
            <p>A port of cocos2dx action system</p>
            <div class="article-list-footer">
              <span class="article-list-date">
                January 16, 2016
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  4 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/tag/cpp">cpp</a>
                
                  <a href="/tag/programming">programming</a>
                
                  <a href="/tag/openFrameworks">openFrameworks</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <p>I picked up using openFrameworks a while ago. But even before that I’ve been doing game development with <a href="http://www.cocos2d-x.org">Cocos2dx</a>. It’s really a great framework and you come to get used to some aspects of it. And it becomes harder for you to live without them. :D</p>

<p>Take the <code class="highlighter-rouge">Action</code> system in Cocos2dx as an example. It’s a great system in which you can make easy animations, chain them, and create new ones on condition. It’s a great fire-and-forget system for animations. You want your circle to move to a position? Easy: <code class="highlighter-rouge">myCircle-&gt;runAction(MoveTo::create(.5f, Vec2(x, y)))</code>. And you don’t have to keep track of it once you run it. It will do its job and self-destroy.</p>

<p>So that’s why I also wanted to be able to use such a system in openFrameworks. So I started porting the system to openFrameworks and I named it <code class="highlighter-rouge">ofxActionManager</code>. You can find the code in my <a href="https://github.com/Furkanzmc/ofxActionManager">GitHub account</a>.</p>

<p><code class="highlighter-rouge">Action</code>s work on <code class="highlighter-rouge">Node</code>s in Cocos2dx. I’m not an expert on openFrameworks. But I thought since people do a lot of custom drawing and stuff in openFrameworks I thought it’d be better to make the <code class="highlighter-rouge">Action</code>s depend on a smaller, lightweight class. So instead of <code class="highlighter-rouge">Node</code>, ofxActionManager uses <code class="highlighter-rouge">ActionTarget</code> which is a class with rotation, position, scale and color properties. So when you want to use the action system, you can either inherit <code class="highlighter-rouge">ActionTarget</code> and call your update and draw functions. Or you can just store it as a variable and get the necessary information form that.</p>

<p>Let’s talk about what each class is responsible for.</p>

<ul>
  <li><code class="highlighter-rouge">Action</code>: This is the base class for all the actions.</li>
  <li><code class="highlighter-rouge">FiniteTimeAction</code>: It inherits <code class="highlighter-rouge">Action</code> and it is used for actions that have a duration. <code class="highlighter-rouge">0</code> seconds is also considered a duration.</li>
  <li><code class="highlighter-rouge">ActionInterval</code>: An interval action is an action that takes place within a certain period of time. It has an start time, and a finish time.</li>
  <li><code class="highlighter-rouge">ActionInstant</code>: Instant actions don’t have any duration and they are executed immediately and one time only.</li>
  <li><code class="highlighter-rouge">ActionEase</code>: This is the base class for the easing actions that run on other actions.</li>
</ul>

<p>By using these base classes, you can create any number of actions you want. Cocos2dx has actions to manipulate position, scale, rotation, color, visibility… And many more can be implemented as needed.</p>

<p>Let’s see an example in openFrameworks. Let’s create a <code class="highlighter-rouge">MyCircle</code> class that inherits <code class="highlighter-rouge">ActionTarget</code>.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include "ActionTarget.h"
</span>
<span class="k">class</span> <span class="nc">MyCircle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ActionTarget</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">MyCircle</span><span class="p">(</span><span class="kt">float</span> <span class="n">radius</span> <span class="o">=</span> <span class="mf">30.</span><span class="n">f</span><span class="p">)</span>
        <span class="o">:</span> <span class="n">m_Radius</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
    <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">draw</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">ofCircle</span><span class="p">(</span><span class="n">m_Position</span><span class="p">,</span> <span class="n">m_Radius</span><span class="p">);</span>
    <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="kt">float</span> <span class="n">m_Radius</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p><code class="highlighter-rouge">ActionTarget</code> has a helper function <code class="highlighter-rouge">ActionTarget::runAction(Action *action)</code>. This function takes the action its given and adds it our action manager setting the target to itself.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">//Part ofApp.h
</span><span class="cp">#include "MyCircle.h"
</span>
<span class="k">private</span><span class="o">:</span>
    <span class="n">MyCircle</span> <span class="n">m_Circle</span><span class="p">;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">//Part of ofApp.cpp
</span><span class="cp">#include "ofxActionManager.h"
</span>
<span class="n">ofApp</span><span class="o">::</span><span class="n">ofApp</span><span class="p">()</span>
    <span class="o">:</span> <span class="n">m_Circle</span><span class="p">()</span>
<span class="p">{</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofApp</span><span class="o">::</span><span class="n">update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//ActionManager is a singleton class. Make sure to call update in just one place
</span>    <span class="n">ActionManager</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">update</span><span class="p">(</span><span class="n">ofGetLastFrameTime</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofApp</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">m_Circle</span><span class="p">.</span><span class="n">draw</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofApp</span><span class="o">::</span><span class="n">mouseReleased</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">button</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Let's move the circle to the mouse position
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">button</span> <span class="o">==</span> <span class="n">OF_MOUSE_BUTTON_1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">m_Circle</span><span class="p">.</span><span class="n">runAction</span><span class="p">(</span><span class="mf">1.</span><span class="n">f</span><span class="p">,</span> <span class="n">MoveTo</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="n">ofVec2f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)));</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">//We can also use easings on any action
</span>        <span class="k">auto</span> <span class="n">moveAction</span> <span class="o">=</span> <span class="n">MoveTo</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="n">ofVec2f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">));</span>
        <span class="n">m_Circle</span><span class="p">.</span><span class="n">runAction</span><span class="p">(</span><span class="mf">1.</span><span class="n">f</span><span class="p">,</span> <span class="n">EaseBackIn</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="n">moveAction</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Once you call <code class="highlighter-rouge">runAction</code>, the circle will move to the position with a smooth and eased animation. Under the hood, <code class="highlighter-rouge">ActionTarget::runAction(Action *action)</code> calls <code class="highlighter-rouge">ActionManager::getInstance()-&gt;addAction(Action *action, this, false)</code>. So instead of using <code class="highlighter-rouge">runAction</code> you can also use <code class="highlighter-rouge">ActionManager::addAction</code>.</p>

<p>The main usage is the same as Cocos2dx so you can read up on actions from <a href="http://www.cocos2d-x.org/wiki/Actions">here</a> and do the same with <a href="https://github.com/Furkanzmc/ofxActionManager">ofxActionManager</a>.</p>


          </div>

          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=openFrameworks%3A+Making+Easy+Animations+With+ofxActionManager - http://zmc.space/posts/ofxactionmanager-openframeworks-animations by @Furkanzmc" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://zmc.space/posts/ofxactionmanager-openframeworks-animations" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
            <a href="https://plus.google.com/share?url=http://zmc.space/posts/ofxactionmanager-openframeworks-animations" title="Share on Google+" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 128 128"><path d="M40.7 55.9v16.1c0 0 15.6 0 22 0C59.2 82.5 53.8 88.2 40.7 88.2c-13.3 0-23.7-10.8-23.7-24.2s10.4-24.2 23.7-24.2c7.1 0 11.6 2.5 15.8 5.9 3.3-3.3 3.1-3.8 11.6-11.9 -7.2-6.6-16.8-10.6-27.4-10.6C18.2 23.3 0 41.5 0 64c0 22.5 18.2 40.7 40.7 40.7 33.6 0 41.8-29.3 39-48.8H40.7zM113.9 56.7V42.6h-10.1v14.1H89.4v10.1h14.5v14.5h10.1V66.8H128V56.7H113.9z"/></svg>
            </a>
          </div>

          
            <div id="disqus_thread" class="article-comments"></div>
            <script src="https://zmcspace.disqus.com/embed.js" async defer></script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
          
        </article>
        <footer class="footer appear">
  <p>
    <a href="/about" title="About me">Furkan Üzümcü</a>
  </p>
</footer>

      </div>
    </div>
  </main>
  
  <script>
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-71841354-1','auto');ga('send','pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async></script>


<script src="/assets/vendor.js"></script>



  <script src="/assets/webfonts.js"></script>




  <script src="/assets/scrollappear.js"></script>



<script src="/assets/application.js"></script>


</body>
</html>
